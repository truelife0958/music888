# 更新日志 (Changelog)

所有重要的项目变更都将记录在此文件中。

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。

## [2.0.0] - 2025-01-XX

### 🎯 新增功能

#### 多音乐源智能切换
- ✅ 支持 6 个国内音乐平台（网易云、QQ、酷狗、酷我、虾米、百度）
- ✅ 版权保护时自动尝试其他平台
- ✅ 动态优先级调度，根据成功率自动调整顺序
- ✅ 实时成功率统计和监控

#### 播放历史与收藏管理
- ✅ 自动记录最近 50 首播放歌曲
- ✅ 播放历史一键加载和播放
- ✅ 修复播放器收藏按钮无反应问题
- ✅ 折叠面板设计，独立管理历史、收藏、歌单
- ✅ 快速清空功能

#### 随机播放
- ✅ 一键随机播放全部热门歌曲
- ✅ 自动开始播放第一首

#### 智能容错机制
- ✅ 网络超时优化（15秒超时 + 递增重试延迟）
- ✅ URL 有效性验证，过滤无效资源
- ✅ 智能降级策略（翻唱版 → 原版）
- ✅ 连续失败保护（5首后暂停）

### 🎨 界面优化

#### 可访问性增强
- ✅ 添加焦点可见性样式（WCAG 2.1 AA 标准）
- ✅ 支持减少动画偏好（prefers-reduced-motion）
- ✅ 提高文字对比度到 7:1
- ✅ 移动端触摸目标最小 44px

#### 性能优化
- ✅ 背景动画添加 will-change 优化
- ✅ 骨架屏加载状态
- ✅ 搜索防抖（300ms）

### 🔧 代码改进

#### 新增工具模块
- ✅ 防抖和节流函数
- ✅ 安全的 localStorage 操作
- ✅ 错误消息格式化
- ✅ 时间格式化工具
- ✅ 数组打乱、数字限制等实用函数

#### 代码复用
- ✅ 提取播放列表项渲染函数
- ✅ 提取空状态渲染函数
- ✅ 统一错误处理逻辑

#### 测试框架
- ✅ 集成 Vitest 测试框架
- ✅ 添加工具函数单元测试
- ✅ 测试覆盖率配置
- ✅ 测试环境模拟（localStorage、Audio、fetch）

### 📝 文档完善

#### README 增强
- ✅ 添加项目预览截图占位符
- ✅ 添加性能指标说明
- ✅ 添加常见问题 FAQ（8个问题）
- ✅ 添加开发指南和项目架构说明
- ✅ 添加添加新音乐源的教程
- ✅ 添加代码规范说明

#### 新增文档
- ✅ 创建 CHANGELOG.md 记录版本更新
- ✅ 创建 screenshots/README.md 截图指南
- ✅ 创建 tests/README.md 测试指南

### 🐛 Bug 修复
- ✅ 修复播放器收藏按钮无反应
- ✅ 修复搜索结果为空时的错误提示
- ✅ 优化错误消息显示

### 🔄 变更
- ✅ 项目版本号更新到 2.0.0
- ✅ 许可证更改为 MIT
- ✅ 添加项目关键词和作者信息

---

## [1.0.0] - 2025-01-XX

### 🎯 初始版本

#### 核心功能
- ✅ 多平台音乐搜索（6个平台）
- ✅ 在线音乐播放
- ✅ 品质选择（128K - Hi-Res）
- ✅ 品质自动降级
- ✅ 播放控制（播放/暂停、上一曲/下一曲）
- ✅ 播放模式（列表循环、随机、单曲循环）
- ✅ 音量控制
- ✅ 进度条拖动

#### 歌词功能
- ✅ 实时歌词显示
- ✅ 歌词同步滚动
- ✅ 歌词下载（LRC 格式）

#### 歌单管理
- ✅ 解析网易云歌单
- ✅ 保存歌单到本地
- ✅ 批量下载歌单

#### 下载功能
- ✅ 歌曲下载
- ✅ 歌词下载

#### 用户界面
- ✅ 精美的渐变背景动画
- ✅ 毛玻璃效果
- ✅ 响应式设计（桌面/移动端）
- ✅ 移动端触摸滑动
- ✅ 移动端息屏播放
- ✅ 移动端锁屏控制

#### 部署支持
- ✅ Vercel 一键部署
- ✅ 本地开发环境

---

## 版本说明

### 版本号格式
- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 变更类型
- **新增**: 新功能
- **变更**: 对现有功能的变更
- **弃用**: 即将移除的功能
- **移除**: 已移除的功能
- **修复**: Bug 修复
- **安全**: 安全性修复

---

## 未来计划

### v2.1.0 (计划中)
- [ ] 添加更多单元测试（API、Player、UI 模块）
- [ ] 集成 CI/CD 自动化测试
- [ ] 添加实际项目截图
- [ ] 性能监控和优化
- [ ] 添加用户行为分析

### v3.0.0 (长期规划)
- [ ] 引入状态管理库（Zustand/Pinia）
- [ ] 国际化支持（i18n）
- [ ] PWA 支持（离线缓存）
- [ ] 用户账号系统
- [ ] 云端同步收藏和歌单
- [ ] 社交分享功能
- [ ] 主题切换（深色/浅色模式）

---

## 贡献指南

如果您想为本项目做出贡献，请：

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'feat: 添加某个功能'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 提交 Pull Request

提交信息请遵循 [Conventional Commits](https://www.conventionalcommits.org/zh-hans/) 规范。

---

**感谢所有贡献者！** 🎉
