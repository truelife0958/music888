<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>沄听 - 在线音乐播放器</title>
    <link rel="icon" type="image/x-icon" href="ytmusic.ico">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/additions.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="bg-animation"></div>
    <div class="bg-overlay"></div>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-music"></i>
                <span>沄听</span>
            </div>
            <div class="search-container">
                <div class="search-wrapper">
                    <input type="text" class="search-input" placeholder="搜索音乐、歌手、专辑..." id="searchInput">
                    <select class="source-select" id="sourceSelect">
                        <option value="netease">网易云音乐</option>
                        <option value="tencent">QQ音乐</option>
                        <option value="kugou">酷狗音乐</option>
                        <option value="kuwo">酷我音乐</option>
                        <option value="xiami">虾米音乐</option>
                        <option value="baidu">百度音乐</option>
                        <option value="bilibili">Bilibili音乐</option>
                    </select>
                    <button class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    <div class="main-container">
        <div class="content-section">
            <div class="tabs">
                <button class="tab-btn active" data-tab="search">
                    <i class="fas fa-search"></i> 搜索结果
                </button>
                <button class="tab-btn" data-tab="discover">
                    <i class="fas fa-compass"></i> 发现音乐
                </button>
                <button class="tab-btn" data-tab="parse">
                    <i class="fas fa-cloud-download-alt"></i> 解析歌单
                </button>
            </div>

            <!-- 发现音乐标签 -->
            <div id="discoverTab" class="tab-content">
                <!-- 平台选择器 -->
                <div style="margin-bottom: 15px; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <i class="fas fa-layer-group" style="color: rgba(255, 255, 255, 0.7);"></i>
                        <span style="font-weight: 500; font-size: 14px;">音乐平台</span>
                    </div>
                    <select class="playlist-source-select" id="discoverSourceSelect" style="width: 100%; margin: 0;">
                        <option value="netease">网易云音乐</option>
                        <option value="tencent">QQ音乐</option>
                        <option value="kugou">酷狗音乐</option>
                        <option value="bilibili">Bilibili音乐</option>
                    </select>
                </div>

                <!-- 热门专辑 -->
                <div class="discover-section">
                    <div class="discover-header" data-section="albums" data-expanded="false">
                        <div class="discover-header-left">
                            <i class="fas fa-compact-disc"></i>
                            <span>热门专辑</span>
                        </div>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="discover-content" id="hotAlbums" style="display: none;"></div>
                </div>

                <!-- 热门歌曲 -->
                <div class="discover-section">
                    <div class="discover-header" data-section="songs" data-expanded="false">
                        <div class="discover-header-left">
                            <i class="fas fa-fire"></i>
                            <span>热门歌曲</span>
                        </div>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div class="discover-content" id="hotSongs" style="display: none;"></div>
                </div>
            </div>
            <div id="parseTab" class="tab-content">
                <!-- 我保存的歌单 -->
                <div class="saved-playlists-container" style="margin-bottom: 15px;">
                    <div class="saved-playlists-header">
                        <h4 style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;" id="savedPlaylistsHeader">
                            <i class="fas fa-bookmark"></i>
                            我保存的歌单
                            <i class="fas fa-chevron-down" id="savedPlaylistsToggleIcon" style="font-size: 12px; color: rgba(255, 255, 255, 0.6);"></i>
                        </h4>
                        <button class="clear-all-btn" id="clearSavedPlaylistsBtn" title="清空所有歌单">
                            <i class="fas fa-trash"></i> 清空
                        </button>
                    </div>
                    <div class="saved-playlists-list" id="savedPlaylistsListInParse" style="display: none;">
                        <div class="empty-saved-state">
                            <i class="fas fa-music"></i>
                            <div>暂无保存的歌单</div>
                            <div style="margin-top: 8px; font-size: 12px; opacity: 0.7;">
                                在下方解析歌单后保存
                            </div>
                        </div>
                    </div>
                </div>

                <div class="playlist-input-container">
                    <select class="playlist-source-select" id="playlistSourceSelect" style="margin-bottom: 10px;">
                        <option value="netease">网易云音乐</option>
                        <option value="tencent">QQ音乐</option>
                    </select>
                    <input type="text" id="playlistIdInput" class="playlist-input" placeholder="输入歌单ID (如: 60198, 3778678) 或链接...">
                    <button class="playlist-btn">
                        <i class="fas fa-download"></i> 解析歌单
                    </button>
                </div>
                <div id="currentParsedPlaylist" style="display: none;">
                    <div class="parsed-playlist-header">
                        <div class="parsed-playlist-info">
                            <h3 id="parsedPlaylistName">歌单名称</h3>
                            <p id="parsedPlaylistStats"><i class="fas fa-music"></i> 0首歌曲</p>
                        </div>
                        <div class="parsed-playlist-actions">
                            <button class="action-btn-large download-all-btn" title="下载整个歌单">
                                <i class="fas fa-download"></i> 下载全部
                            </button>
                            <button class="action-btn-large save-btn" title="保存到我的歌单">
                                <i class="fas fa-bookmark"></i> 保存歌单
                            </button>
                            <button class="action-btn-large clear-btn" title="清除当前解析">
                                <i class="fas fa-times-circle"></i> 清除
                            </button>
                        </div>
                    </div>
                </div>
                <div class="search-results" id="parseResults">
                    <div class="empty-state">
                        <i class="fas fa-cloud-download-alt"></i>
                        <div>输入网易云歌单ID或链接后点击解析按钮</div>
                        <div style="margin-top: 10px; font-size: 12px; color: rgba(255, 255, 255, 0.5);">
                            推荐测试歌单ID: <span style="color: #1db954; cursor: pointer;" onclick="document.getElementById('playlistIdInput').value='60198'">60198</span> ·
                            <span style="color: #1db954; cursor: pointer;" onclick="document.getElementById('playlistIdInput').value='3778678'">3778678</span> ·
                            <span style="color: #1db954; cursor: pointer;" onclick="document.getElementById('playlistIdInput').value='2884035'">2884035</span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="savedTab" class="tab-content active">
                <!-- 播放历史 -->
                <div class="saved-playlists-container" style="margin-bottom: 15px;">
                    <div class="saved-playlists-header">
                        <h4 style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;" id="historyHeader">
                            <i class="fas fa-history"></i>
                            播放历史
                            <i class="fas fa-chevron-down" id="historyToggleIcon" style="font-size: 12px; color: rgba(255, 255, 255, 0.6);"></i>
                        </h4>
                        <button class="clear-all-btn" id="clearHistoryBtn" title="清空播放历史">
                            <i class="fas fa-trash"></i> 清空
                        </button>
                    </div>
                    <div class="saved-playlists-list" id="playHistoryList" style="display: none;">
                        <div class="empty-saved-state">
                            <i class="fas fa-history"></i>
                            <div>暂无播放记录</div>
                        </div>
                    </div>
                </div>

                <!-- 我的喜欢 -->
                <div class="saved-playlists-container" style="margin-bottom: 15px;">
                    <div class="saved-playlists-header">
                        <h4 style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;" id="favoritesHeader">
                            <i class="fas fa-heart"></i>
                            我的喜欢
                            <i class="fas fa-chevron-down" id="favoritesToggleIcon" style="font-size: 12px; color: rgba(255, 255, 255, 0.6);"></i>
                        </h4>
                        <button class="clear-all-btn" id="clearFavoritesBtn" title="清空收藏">
                            <i class="fas fa-trash"></i> 清空
                        </button>
                    </div>
                    <div class="saved-playlists-list" id="favoritesList" style="display: none;">
                        <div class="empty-saved-state">
                            <i class="fas fa-heart"></i>
                            <div>暂无收藏歌曲</div>
                            <div style="margin-top: 8px; font-size: 12px; opacity: 0.7;">
                                点击播放器的爱心按钮收藏歌曲
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 我保存的歌单 -->
                <div class="saved-playlists-container" style="margin-bottom: 15px;">
                    <div class="saved-playlists-header">
                        <h4 style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;" id="playlistsHeader">
                            <i class="fas fa-bookmark"></i>
                            我保存的歌单
                            <i class="fas fa-chevron-down" id="playlistsToggleIcon" style="font-size: 12px; color: rgba(255, 255, 255, 0.6);"></i>
                        </h4>
                        <button class="clear-all-btn" title="清空所有歌单">
                            <i class="fas fa-trash"></i> 清空
                        </button>
                    </div>
                    <div class="saved-playlists-list" id="savedPlaylistsList" style="display: none;">
                        <div class="empty-saved-state">
                            <i class="fas fa-music"></i>
                            <div>暂无保存的歌单</div>
                            <div style="margin-top: 8px; font-size: 12px; opacity: 0.7;">
                                在"解析网易云歌单"页面解析后保存
                            </div>
                        </div>
                    </div>
                </div>

                <div class="search-results" id="savedResults">
                    <div class="empty-state">
                        <i class="fas fa-hand-pointer"></i>
                        <div>点击上方播放历史、收藏或歌单查看详情</div>
                    </div>
                </div>
            </div>
            <div id="searchTab" class="tab-content active">
                <!-- 探索雷达 -->
                <div class="discover-section">
                    <button class="explore-radar-btn" id="exploreRadarBtn">
                        <i class="fas fa-satellite-dish"></i>
                        <span>探索雷达 - 发现热门音乐</span>
                    </button>
                </div>
                <div class="search-results" id="searchResults">
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <div>在上方搜索框输入关键词开始搜索音乐，或点击探索雷达发现热门音乐</div>
                    </div>
                </div>
            </div>
            <audio id="audioPlayer" preload="metadata"></audio>
        </div>

        <!-- 播放器区域 -->
        <div class="player-section">
            <div class="player-content">
                <div class="current-song">
                    <div class="current-cover-container">
                        <img class="current-cover" id="currentCover" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIwIiBoZWlnaHQ9IjIyMCIgdmlld0JveD0iMCAwIDIyMCAyMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMjAiIGhlaWdodD0iMjIwIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU5LDAuMSkiIHJ4PSIyMCIvPgo8cGF0aCBkPSJNMTEwIDcwTDE0MCAxMTBIMTIwVjE1MEg5MFYxMTBINzBMMTEwIDcwWiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjMpIi8+Cjwvc3ZnPgo=" alt="专辑封面">
                    </div>
                    <div class="current-info">
                        <h3 id="currentTitle">未选择歌曲</h3>
                        <p id="currentArtist">请搜索并选择要播放的歌曲</p>
                    </div>
                </div>
                <div class="player-controls">
                    <button class="control-btn small" id="playlistBtn" title="播放列表">
                        <i class="fas fa-list-ul"></i>
                    </button>
                    <button class="control-btn small" id="playerFavoriteBtn" title="添加到我的喜欢">
                        <i class="far fa-heart"></i>
                    </button>
                    <button class="control-btn small">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="control-btn play-btn" id="playBtn">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="control-btn small">
                        <i class="fas fa-step-forward"></i>
                    </button>
                    <button class="control-btn small" id="playModeBtn" title="列表循环">
                        <i class="fas fa-repeat"></i>
                    </button>
                </div>
                <!-- 歌词显示区域 -->
                <div class="lyrics-container-inline" id="lyricsContainerInline">
                    <div class="lyric-line">暂无歌词</div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="time-info">
                        <span id="currentTime">0:00</span>
                        <span id="totalTime">0:00</span>
                    </div>
                </div>
                <div class="volume-container">
                    <i class="fas fa-volume-up volume-icon"></i>
                    <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80">
                </div>
                <div class="quality-download-container">
                    <select class="quality-select" id="qualitySelect">
                        <option value="128">标准 128K</option>
                        <option value="192">较高 192K</option>
                        <option value="320">高品质 320K</option>
                        <option value="740" selected>无损 FLAC</option>
                        <option value="999">Hi-Res</option>
                    </select>
                    <button class="download-btn" id="downloadSongBtn" disabled>
                        <i class="fas fa-download"></i>
                        <span>下载音乐</span>
                    </button>
                    <button class="download-btn" id="downloadLyricBtn" disabled>
                        <i class="fas fa-file-text"></i>
                        <span>下载歌词</span>
                    </button>
                </div>
            </div>
            <audio id="audioPlayer" preload="metadata"></audio>
        </div>

        <!-- 我的区域 -->
        <div class="my-section">
            <h2 class="section-title">
                <i class="fas fa-bookmark"></i> 我的
            </h2>

            <!-- 播放历史 -->
            <div class="saved-playlists-container" style="margin-bottom: 15px;">
                <div class="saved-playlists-header">
                    <h4 style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;" id="historyHeader">
                        <i class="fas fa-history"></i>
                        播放历史
                        <i class="fas fa-chevron-down" id="historyToggleIcon" style="font-size: 12px; color: rgba(255, 255, 255, 0.6);"></i>
                    </h4>
                    <button class="clear-all-btn" id="clearHistoryBtn" title="清空播放历史">
                        <i class="fas fa-trash"></i> 清空
                    </button>
                </div>
                <div class="saved-playlists-list" id="playHistoryList" style="display: none;">
                    <div class="empty-saved-state">
                        <i class="fas fa-history"></i>
                        <div>暂无播放记录</div>
                    </div>
                </div>
            </div>

            <!-- 我的喜欢 -->
            <div class="saved-playlists-container" style="margin-bottom: 15px;">
                <div class="saved-playlists-header">
                    <h4 style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;" id="favoritesHeader">
                        <i class="fas fa-heart"></i>
                        我的喜欢
                        <i class="fas fa-chevron-down" id="favoritesToggleIcon" style="font-size: 12px; color: rgba(255, 255, 255, 0.6);"></i>
                    </h4>
                    <button class="clear-all-btn" id="clearFavoritesBtn" title="清空收藏">
                        <i class="fas fa-trash"></i> 清空
                    </button>
                </div>
                <div class="saved-playlists-list" id="favoritesList" style="display: none;">
                    <div class="empty-saved-state">
                        <i class="fas fa-heart"></i>
                        <div>暂无收藏歌曲</div>
                        <div style="margin-top: 8px; font-size: 12px; opacity: 0.7;">
                            点击播放器的爱心按钮收藏歌曲
                        </div>
                    </div>
                </div>
            </div>

            
            <div class="search-results" id="savedResults">
                <div class="empty-state">
                    <i class="fas fa-hand-pointer"></i>
                    <div>点击上方播放历史、收藏或歌单查看详情</div>
                </div>
            </div>
        </div>

        <div class="mobile-page-indicators">
            <div class="page-indicator active" onclick="switchMobilePage(0)"></div>
            <div class="page-indicator" onclick="switchMobilePage(1)"></div>
            <div class="page-indicator" onclick="switchMobilePage(2)"></div>
        </div>
    </div>

    <!-- 播放列表弹窗 -->
    <div class="playlist-modal" id="playlistModal">
        <div class="playlist-modal-content">
            <div class="playlist-modal-header">
                <h3><i class="fas fa-list-ul"></i> 当前播放列表</h3>
                <button class="close-modal-btn" id="closePlaylistModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="playlist-modal-body" id="playlistModalBody">
                <div class="empty-state">
                    <i class="fas fa-music"></i>
                    <div>播放列表为空</div>
                </div>
            </div>
            <div class="playlist-modal-footer">
                <button class="modal-btn" id="clearPlaylistBtn">
                    <i class="fas fa-trash"></i> 清空列表
                </button>
                <button class="modal-btn" id="savePlaylistBtn">
                    <i class="fas fa-save"></i> 保存为歌单
                </button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="https://github.com/truelife0958/music888" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-github"></i>
                    <span>GitHub 仓库</span>
                </a>
                <span class="footer-divider">|</span>
                <a href="https://github.com/truelife0958/music888/issues" target="_blank" rel="noopener noreferrer">
                    <i class="fas fa-bug"></i>
                    <span>反馈问题</span>
                </a>
                <span class="footer-divider">|</span>
                <a href="https://github.com/truelife0958/music888/stargazers" target="_blank" rel="noopener noreferrer">
                    <i class="fas fa-star"></i>
                    <span>Star 支持</span>
                </a>
            </div>
            <div class="footer-info">
                <p>© 2025 沄听 - 开源在线音乐播放器</p>
            </div>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script type="module" src="js/main.ts"></script>
</body>
</html>
